<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"sevenqi7.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Seven7&#39;s Blog">
<meta property="og:url" content="http://sevenqi7.github.io/none-path/index.html">
<meta property="og:site_name" content="Seven7&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Sevenqi7@github.io">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://sevenqi7.github.io/none-path/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<script async src="/lib/fireworks.js"></script>
  <title>Seven7's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Seven7's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://sevenqi7.github.io/2023/03/28/ysyx%E9%A2%84%E7%AD%94%E8%BE%A9%E8%AF%BB%E5%90%8E%E6%84%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/myicon.jpg">
      <meta itemprop="name" content="Sevenqi7@github.io">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seven7's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/28/ysyx%E9%A2%84%E7%AD%94%E8%BE%A9%E8%AF%BB%E5%90%8E%E6%84%9F/" class="post-title-link" itemprop="url">ysyx预答辩读后感</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-03-28 21:01:23" itemprop="dateCreated datePublished" datetime="2023-03-28T21:01:23+08:00">2023-03-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://sevenqi7.github.io/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/myicon.jpg">
      <meta itemprop="name" content="Sevenqi7@github.io">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seven7's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/" class="post-title-link" itemprop="url">ysyx预学习报告</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-03-27 12:08:58" itemprop="dateCreated datePublished" datetime="2023-03-27T12:08:58+08:00">2023-03-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-03-29 11:22:58" itemprop="dateModified" datetime="2023-03-29T11:22:58+08:00">2023-03-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ysyx/" itemprop="url" rel="index"><span itemprop="name">ysyx</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ysyx-预学习阶段-报告-amp-读后感"><a href="#ysyx-预学习阶段-报告-amp-读后感" class="headerlink" title="ysyx-预学习阶段-报告&amp;读后感"></a><center>ysyx-预学习阶段-报告&amp;读后感</center></h2><h4 id="参加ysyx的理由"><a href="#参加ysyx的理由" class="headerlink" title="参加ysyx的理由"></a>参加ysyx的理由</h4><p>直接原因是看到能够学到怎么在自己设计的CPU上跑Linux。虽然自己能力有限，但是还算喜欢折腾。去年在一个人摸索的情况下参加了龙芯杯的个人赛，对着波形嗯调了五级流水线，实现难以忍受。后来做CPU设计实战的实验才知道可以用trace帮助调试，又在上学期看到了ysyx这个项目，决定要参与进来。在完成了操作系统的试点实验任务之后，这学期稍微宽松一点的时间表终于能允许我全身心投入进来了。给自己定个小目标：跑起Linux，以及用HDL搭起一个双发射乱序的处理器。</p>
<hr>
<h4 id="完成Linux系统安装（PA0）"><a href="#完成Linux系统安装（PA0）" class="headerlink" title="完成Linux系统安装（PA0）"></a>完成Linux系统安装（PA0）</h4><p>由于我事实上已经使用Linux系统（目前是KUbuntu）接近一年时间，因此这一部分内容我只是大致地进行了阅读，并没有实际操作。之前在学校的操作系统试点实验即已使用的是Linux系统，我当时是为老师提供的操作系统增加实现了一个revision 0版本的ext2文件系统。</p>
<p>因为日常使用Linux已经接近一年，也算是熟悉了Linux系统的基本命令。使用KUbuntu的原因是之前使用虚拟机时觉得Ubuntu自带的gnome桌面太丑，在看到同学的Archlinux上的KDE桌面后一眼就心动了，最后选择装了预装了KDE的KUbuntu。这个版本的Ubuntu除了安装中文输入法时有点让人破防以外，到现在为止使用体验还是不错的。下图是我现在的电脑桌面。</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/Screenshot_20230328_140555.png" class>

<hr>
<h4 id="Verilator仿真环境的安装和配置"><a href="#Verilator仿真环境的安装和配置" class="headerlink" title="Verilator仿真环境的安装和配置"></a>Verilator仿真环境的安装和配置</h4><h5 id="1-安装verilator"><a href="#1-安装verilator" class="headerlink" title="1.安装verilator"></a>1.安装verilator</h5><p>之前打龙芯杯用的是vivado和modelsim，不过也听说过用verilator的话仿真速度会变快不少。按照官网的文档，用apt安装好verilator的前置依赖，然后从github上拉取源码，切换到ysyx指定的5.008版本编译安装即可。这个项目是用CMake管理的，安装起来还算方便。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:verilator/verilator.git</span><br><span class="line"><span class="built_in">cd</span> verilator</span><br><span class="line">git checkout v5.008</span><br><span class="line">autoconf			<span class="comment">#自动生成./configure配置文件</span></span><br><span class="line">./configure			<span class="comment">#执行配置文件以生成Makefile</span></span><br><span class="line">make -j <span class="string">&#x27;nproc&#x27;</span>		<span class="comment">#通过make编译verilator</span></span><br><span class="line">sudo make install	</span><br></pre></td></tr></table></figure>

<p>之后可以在终端里输入verilator –version确认对应版本是否已成功安装。然后通过阅读官网的说明，可以得学习到verilator的使用方法。例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">verilator -Wall --cc top.v --exe --trace sim_main.cpp</span><br></pre></td></tr></table></figure>

<p>这段命令是将top.v文件以sim_main.cpp中指定的行为进行仿真，-Wall选项指定verilator输出所有的警告，–cc选项指定生成C++代码，–exe指定verilator创建用于生成可执行的模拟文件的makefile，–trace则是指定verilator在仿真完成后输出波形。</p>
<p>常见的编译选项整理如下：</p>
<ul>
<li><p>编译选项 </p>
<p>​		–cc : 生成C++代码</p>
<p>​		–sc：生成SystemC代码</p>
<p>​		–lint-only：检查设计文件但不生成任何输出文件</p>
<p>​		–xml-only：输出XML文件用于其它设计工具</p>
<p>​		-Wall：输出所有警告</p>
<p>​		-y：到文件夹中寻找文件</p>
<p>​		–trace：允许生成waveforms</p>
<p>​		–top-module：指定最高层模块的名称</p>
</li>
<li><p>C++和SystemC的生成：</p>
<p>​		–exe：创建用于生成可执行的模拟文件的makefile</p>
<p>​		–build：调用GNU Make或者CMake来编译模型</p>
<p>​		–Mdir：指定生成的文件所在的文件夹，否则默认位于obj_dir内</p>
<p>注意单独输入–trace并不能让verilator输出波形，还需要在verilog代码内使用$dumpvars系统函数。以下是verilator自带的examples提供的示例，这段代码检测trace参数是否存在，若存在则将波形输出到指定目录中。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> ($test$plusargs(<span class="string">&quot;trace&quot;</span>) != <span class="number">0</span>) <span class="keyword">begin</span></span><br><span class="line">        <span class="built_in">$display</span>(<span class="string">&quot;[%0t] Tracing to logs/vlt_dump.vcd...\n&quot;</span>, <span class="built_in">$time</span>);</span><br><span class="line">        <span class="built_in">$dumpfile</span>(<span class="string">&quot;logs/vlt_dump.vcd&quot;</span>);</span><br><span class="line">        <span class="built_in">$dumpvars</span>();</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">$display</span>(<span class="string">&quot;[%0t] Model running...\n&quot;</span>, <span class="built_in">$time</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2-搭建环境"><a href="#2-搭建环境" class="headerlink" title="2.搭建环境"></a>2.搭建环境</h5><p>通过init.sh脚本获得的npc的目录结构是这样的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npc_verilog</span><br><span class="line">├── build</span><br><span class="line">├── csrc</span><br><span class="line">└── vsrc</span><br></pre></td></tr></table></figure>

<p>其中csrc和vsrc分别存放verilator的.cpp文件和verilog的.v文件，build则是verilator在编译和仿真的过程中生成的目标文件。这里需要我们自己写一个Makefile来运行仿真，可以参考verilator本身在编译完后自带的几个例子，我参考的是make_tracing_c里的用例。这个用例给出了如何通过C++代码对Verilog模块进行仿真的过程，在仿真完之后还会把波形输出到logs文件夹中。运行结果如图所示。</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/c9f5cc116efc591e84aa99f1431343c9.png" class>

<p>Linux查看波形的.vcd文件通常使用GTKWave，直接用apt安装即可。</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/123213123213.png" class>

<p>参考这个示例，不难（实际上研究输出波形研究了挺久的）写出正确的makefile，完成双控开关的实验。下图是仿真双控开关的结果。</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/28f6534a6a0692dcdf0ece0b23581b45.png" class>

<h5 id="3-接入nvboard"><a href="#3-接入nvboard" class="headerlink" title="3.接入nvboard"></a>3.接入nvboard</h5><p>nvboard里已经提供了一个使用的例子，再加上自带的说明文档，可以照猫画虎的把npc连入nvboard之中。阅读nvboard的example中的makefile（或者读说明文档也可以）得知nvboard是基于SDL2多媒体库实现的，因此在verilator仿真时还需要链接上SDL2库。这里给出部分makefile的实现：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$(BIN)</span>: <span class="variable">$(VSRC_OBJ)</span> <span class="variable">$(CSRC_OBJ)</span> <span class="variable">$(NVBOARD_ARCHIVE)</span></span><br><span class="line"></span><br><span class="line">	<span class="variable">$(VERILATOR)</span> <span class="variable">$(VERILATOR_FLAGS)</span> <span class="variable">$^</span> \</span><br><span class="line">	<span class="variable">$(<span class="built_in">addprefix</span> -CFLAGS , <span class="variable">$(CFLAGS)</span>)</span> <span class="variable">$(<span class="built_in">addprefix</span> -LDFLAGS , <span class="variable">$(LDFLAGS)</span>)</span> \</span><br><span class="line">	--top-module <span class="variable">$(TOPNAME)</span> \</span><br><span class="line">	--Mdir <span class="variable">$(OBJ_DIR)</span> -o <span class="variable">$(<span class="built_in">abspath</span> <span class="variable">$(BIN)</span>)</span></span><br></pre></td></tr></table></figure>

<p>接入nvboard之后就可以把npc上的电路运行在这个模拟出来的fpga上了，不过我用的时候感觉还挺卡的。在约束文件里把双控开关中的a和b绑定到两个开关上，输出f绑定到一个led灯上，make run运行即大功告成。</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/29179d6e202f46729699f1b09b9c1d71.png" class>

<p>之后还可以跑讲义里给的流水灯代码，不过有部分条件判断是缺失的。</p>
<hr>
<h4 id="4-数字电路基础实验"><a href="#4-数字电路基础实验" class="headerlink" title="4.数字电路基础实验"></a>4.数字电路基础实验</h4><p>由于C语言我自己在三年的学习生活中使用的比较多，自认为是比较熟悉的，因此C语言的部分在阅读完全部练习并确认自己已经掌握以后就直接跳过了，直接进入数电实验。</p>
<p>去年打龙芯杯的时候使用的是Verilog，讲义里提到建议有Verilog基础的同学学习CHISEL，我也就照做了。学习CHISEL并不是什么轻松的事，这个语言相对来说使用的人还比较少，能找到的资料也不多。好在Chisel Bootcamp、Chisel Users Guide以及Chisel API的信息足够全面，加上学习的时候不会的就问ChatGPT（虽然它也不靠谱，偶尔还给我编个不存在的API出来），学会查找想要的信息后学起来就相对轻松了。现在的主要痛点还是因为Scala是个强类型语言，这也是我第一次接触强类型语言，故多少有点不太习惯。</p>
<h6 id="1-实现二位四选一选择器"><a href="#1-实现二位四选一选择器" class="headerlink" title="1.实现二位四选一选择器"></a>1.实现二位四选一选择器</h6><p>Chisel里自带了Mux和MuxCase两个选择器API，然而当时的我并不知道有这个东西，最后还用switch实现的。Chisel生成的verilog代码如下：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> MyParameterizedMux(</span><br><span class="line">  <span class="keyword">input</span>        clock,</span><br><span class="line">  <span class="keyword">input</span>        reset,</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">1</span>:<span class="number">0</span>] io_in_0,</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">1</span>:<span class="number">0</span>] io_in_1,</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">1</span>:<span class="number">0</span>] io_in_2,</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">1</span>:<span class="number">0</span>] io_in_3,</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">1</span>:<span class="number">0</span>] io_select,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">1</span>:<span class="number">0</span>] io_out</span><br><span class="line">);</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">1</span>:<span class="number">0</span>] _GEN_1 = <span class="number">2&#x27;h1</span> == io_select ? io_in_1 : io_in_0; <span class="comment">// @[MyParameterizedMux.scala 18:&#123;12,12&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">1</span>:<span class="number">0</span>] _GEN_2 = <span class="number">2&#x27;h2</span> == io_select ? io_in_2 : _GEN_1; <span class="comment">// @[MyParameterizedMux.scala 18:&#123;12,12&#125;]</span></span><br><span class="line">  <span class="keyword">assign</span> io_out = <span class="number">2&#x27;h3</span> == io_select ? io_in_3 : _GEN_2; <span class="comment">// @[MyParameterizedMux.scala 18:&#123;12,12&#125;]</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<h5 id="2-实现8-3优先编码器，并在七段数码管上显示"><a href="#2-实现8-3优先编码器，并在七段数码管上显示" class="headerlink" title="2.实现8-3优先编码器，并在七段数码管上显示"></a>2.实现8-3优先编码器，并在七段数码管上显示</h5><p>优先编码器在verilog里可以利用行为建模里的if-else实现，虽然不提倡使用行为建模，但是实现优先编码器时用行为建模可以省很多时间。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> My8_3Encoder(</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">7</span>:<span class="number">0</span>] io_in,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">2</span>:<span class="number">0</span>] io_out,</span><br><span class="line">  <span class="keyword">input</span>        io_en</span><br><span class="line">);</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">2</span>:<span class="number">0</span>] _GEN_7 = io_in[<span class="number">7</span>] ? <span class="number">3&#x27;h7</span> : <span class="number">3&#x27;h0</span>; <span class="comment">// @[MyParameterisedDecoder.scala 16:&#123;31,40&#125; 19:16]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">2</span>:<span class="number">0</span>] _GEN_8 = io_en ? _GEN_7 : <span class="number">3&#x27;h0</span>; <span class="comment">// @[MyParameterisedDecoder.scala 12:12 14:30]</span></span><br><span class="line">  <span class="keyword">assign</span> io_out = io_in == <span class="number">8&#x27;h0</span> ? <span class="number">3&#x27;h0</span> : _GEN_8; <span class="comment">// @[MyParameterisedDecoder.scala 13:&#123;26,35&#125;]</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>数码管的显示只需要照着图理解每个数码管的9位数据分别控制的是哪一段就可以了，</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> DE10HexDecoder(</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">7</span>:<span class="number">0</span>] io_in,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_out</span><br><span class="line">);</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] offlight = <span class="number">7&#x27;b1111111</span>;</span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_0 = io_in == <span class="number">8&#x27;hf</span> ? <span class="number">7&#x27;he</span> : offlight; <span class="comment">// @[DE10Decoder.scala 11:12 27:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_1 = io_in == <span class="number">8&#x27;he</span> ? <span class="number">7&#x27;h6</span> : _GEN_0; <span class="comment">// @[DE10Decoder.scala 26:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_2 = io_in == <span class="number">8&#x27;hd</span> ? <span class="number">7&#x27;h21</span> : _GEN_1; <span class="comment">// @[DE10Decoder.scala 25:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_3 = io_in == <span class="number">8&#x27;hc</span> ? <span class="number">7&#x27;h46</span> : _GEN_2; <span class="comment">// @[DE10Decoder.scala 24:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_4 = io_in == <span class="number">8&#x27;hb</span> ? <span class="number">7&#x27;h3</span> : _GEN_3; <span class="comment">// @[DE10Decoder.scala 23:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_5 = io_in == <span class="number">8&#x27;ha</span> ? <span class="number">7&#x27;h8</span> : _GEN_4; <span class="comment">// @[DE10Decoder.scala 22:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_6 = io_in == <span class="number">8&#x27;h9</span> ? <span class="number">7&#x27;h10</span> : _GEN_5; <span class="comment">// @[DE10Decoder.scala 21:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_7 = io_in == <span class="number">8&#x27;h8</span> ? <span class="number">7&#x27;h0</span> : _GEN_6; <span class="comment">// @[DE10Decoder.scala 20:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_8 = io_in == <span class="number">8&#x27;h7</span> ? <span class="number">7&#x27;h78</span> : _GEN_7; <span class="comment">// @[DE10Decoder.scala 19:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_9 = io_in == <span class="number">8&#x27;h6</span> ? <span class="number">7&#x27;h2</span> : _GEN_8; <span class="comment">// @[DE10Decoder.scala 18:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_10 = io_in == <span class="number">8&#x27;h5</span> ? <span class="number">7&#x27;h12</span> : _GEN_9; <span class="comment">// @[DE10Decoder.scala 17:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_11 = io_in == <span class="number">8&#x27;h4</span> ? <span class="number">7&#x27;h19</span> : _GEN_10; <span class="comment">// @[DE10Decoder.scala 16:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_12 = io_in == <span class="number">8&#x27;h3</span> ? <span class="number">7&#x27;h30</span> : _GEN_11; <span class="comment">// @[DE10Decoder.scala 15:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_13 = io_in == <span class="number">8&#x27;h2</span> ? <span class="number">7&#x27;h24</span> : _GEN_12; <span class="comment">// @[DE10Decoder.scala 14:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] _GEN_14 = io_in == <span class="number">8&#x27;h1</span> ? <span class="number">7&#x27;h79</span> : _GEN_13; <span class="comment">// @[DE10Decoder.scala 13:&#123;30,39&#125;]</span></span><br><span class="line">  <span class="keyword">assign</span> io_out = io_in == <span class="number">8&#x27;h0</span> ? <span class="number">7&#x27;h40</span> : _GEN_14; <span class="comment">// @[DE10Decoder.scala 12:&#123;25,34&#125;]</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>最后在nvboard上的效果如下：</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/436c8ef61aae442727f64bc7a9746a87.png" class>

<h5 id="3-加法器与ALU"><a href="#3-加法器与ALU" class="headerlink" title="3.加法器与ALU"></a>3.加法器与ALU</h5><p>全加器我直接把之前学校数电实验的东西拿过来了。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">module</span> adder (</span><br><span class="line">    <span class="keyword">input</span> a,</span><br><span class="line">    <span class="keyword">input</span> b,</span><br><span class="line">    <span class="keyword">output</span> sum,</span><br><span class="line">    <span class="keyword">output</span> cout</span><br><span class="line">);</span><br><span class="line">    <span class="keyword">assign</span> &#123;cout, sum&#125; = a + b;</span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<p>ALU部分在折腾git的时候不小心弄丢了，还没保存，现在没办法展示了ORZ。</p>
<h5 id="4-移位寄存器以及桶形寄存器"><a href="#4-移位寄存器以及桶形寄存器" class="headerlink" title="4.移位寄存器以及桶形寄存器"></a>4.移位寄存器以及桶形寄存器</h5><p>chisel生成的代码如下</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> top(</span><br><span class="line">  <span class="keyword">input</span>        clock,</span><br><span class="line">  <span class="keyword">input</span>        reset,</span><br><span class="line">  <span class="keyword">input</span>  [<span class="number">7</span>:<span class="number">0</span>] io_sw,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_seg_0,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_seg_1,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_seg_2,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_seg_3,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_seg_4,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_seg_5,</span><br><span class="line">  <span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] io_seg_6,</span><br><span class="line">  <span class="keyword">input</span>        io_sw_ctrl</span><br><span class="line">);</span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_REG_INIT</span></span><br><span class="line">  <span class="keyword">reg</span> [<span class="number">31</span>:<span class="number">0</span>] _RAND_0;</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span> </span><span class="comment">// RANDOMIZE_REG_INIT</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>] seg0decoder_io_in; <span class="comment">// @[top.scala 14:29]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] seg0decoder_io_out; <span class="comment">// @[top.scala 14:29]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>] seg1decoder_io_in; <span class="comment">// @[top.scala 15:29]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">6</span>:<span class="number">0</span>] seg1decoder_io_out; <span class="comment">// @[top.scala 15:29]</span></span><br><span class="line">  <span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] shiftReg; <span class="comment">// @[top.scala 13:27]</span></span><br><span class="line">  <span class="keyword">wire</span>  newVal = shiftReg[<span class="number">0</span>] ^ shiftReg[<span class="number">2</span>] ^ shiftReg[<span class="number">3</span>] ^ shiftReg[<span class="number">4</span>]; <span class="comment">// @[top.scala 16:58]</span></span><br><span class="line">  <span class="keyword">wire</span> [<span class="number">7</span>:<span class="number">0</span>] _shiftReg_T_1 = &#123;newVal,shiftReg[<span class="number">7</span>:<span class="number">1</span>]&#125;; <span class="comment">// @[Cat.scala 33:92]</span></span><br><span class="line">  DE10HexDecoder seg0decoder ( <span class="comment">// @[top.scala 14:29]</span></span><br><span class="line">    <span class="variable">.io_in</span>(seg0decoder_io_in),</span><br><span class="line">    <span class="variable">.io_out</span>(seg0decoder_io_out)</span><br><span class="line">  );</span><br><span class="line">  DE10HexDecoder seg1decoder ( <span class="comment">// @[top.scala 15:29]</span></span><br><span class="line">    <span class="variable">.io_in</span>(seg1decoder_io_in),</span><br><span class="line">    <span class="variable">.io_out</span>(seg1decoder_io_out)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">assign</span> io_seg_0 = seg0decoder_io_out; <span class="comment">// @[top.scala 26:15]</span></span><br><span class="line">  <span class="keyword">assign</span> io_seg_1 = seg1decoder_io_out; <span class="comment">// @[top.scala 27:15]</span></span><br><span class="line">  <span class="keyword">assign</span> io_seg_2 = <span class="number">7&#x27;h7f</span>; <span class="comment">// @[top.scala 29:19]</span></span><br><span class="line">  <span class="keyword">assign</span> io_seg_3 = <span class="number">7&#x27;h7f</span>; <span class="comment">// @[top.scala 29:19]</span></span><br><span class="line">  <span class="keyword">assign</span> io_seg_4 = <span class="number">7&#x27;h7f</span>; <span class="comment">// @[top.scala 29:19]</span></span><br><span class="line">  <span class="keyword">assign</span> io_seg_5 = <span class="number">7&#x27;h7f</span>; <span class="comment">// @[top.scala 29:19]</span></span><br><span class="line">  <span class="keyword">assign</span> io_seg_6 = <span class="number">7&#x27;h7f</span>; <span class="comment">// @[top.scala 29:19]</span></span><br><span class="line">  <span class="keyword">assign</span> seg0decoder_io_in = &#123;&#123;<span class="number">4&#x27;d0</span>&#125;, shiftReg[<span class="number">3</span>:<span class="number">0</span>]&#125;; <span class="comment">// @[top.scala 24:23]</span></span><br><span class="line">  <span class="keyword">assign</span> seg1decoder_io_in = &#123;&#123;<span class="number">4&#x27;d0</span>&#125;, shiftReg[<span class="number">7</span>:<span class="number">4</span>]&#125;; <span class="comment">// @[top.scala 25:23]</span></span><br><span class="line">  <span class="keyword">always</span> @(<span class="keyword">posedge</span> clock) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> (reset) <span class="keyword">begin</span> <span class="comment">// @[top.scala 13:27]</span></span><br><span class="line">      shiftReg &lt;= <span class="number">8&#x27;h0</span>; <span class="comment">// @[top.scala 13:27]</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> (~io_sw_ctrl) <span class="keyword">begin</span> <span class="comment">// @[top.scala 17:29]</span></span><br><span class="line">      shiftReg &lt;= _shiftReg_T_1; <span class="comment">// @[top.scala 18:18]</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">      shiftReg &lt;= io_sw; <span class="comment">// @[top.scala 21:18]</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="comment">// Register and memory initialization</span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_GARBAGE_ASSIGN</span></span><br><span class="line"><span class="meta">`<span class="keyword">define</span> RANDOMIZE</span></span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_INVALID_ASSIGN</span></span><br><span class="line"><span class="meta">`<span class="keyword">define</span> RANDOMIZE</span></span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_REG_INIT</span></span><br><span class="line"><span class="meta">`<span class="keyword">define</span> RANDOMIZE</span></span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_MEM_INIT</span></span><br><span class="line"><span class="meta">`<span class="keyword">define</span> RANDOMIZE</span></span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">ifndef</span> RANDOM</span></span><br><span class="line"><span class="meta">`<span class="keyword">define</span> RANDOM $random</span></span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_MEM_INIT</span></span><br><span class="line">  <span class="keyword">integer</span> initvar;</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">ifndef</span> SYNTHESIS</span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> FIRRTL_BEFORE_INITIAL</span></span><br><span class="line">`FIRRTL_BEFORE_INITIAL</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">  <span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE</span></span><br><span class="line">    <span class="meta">`<span class="keyword">ifdef</span> INIT_RANDOM</span></span><br><span class="line">      `INIT_RANDOM</span><br><span class="line">    <span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line">    <span class="meta">`<span class="keyword">ifndef</span> VERILATOR</span></span><br><span class="line">      <span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_DELAY</span></span><br><span class="line">        #`RANDOMIZE_DELAY <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">      <span class="meta">`<span class="keyword">else</span></span></span><br><span class="line">        #<span class="number">0</span><span class="variable">.002</span> <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">      <span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line">    <span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> RANDOMIZE_REG_INIT</span></span><br><span class="line">  _RAND_0 = &#123;<span class="number">1</span>&#123;`RANDOM&#125;&#125;;</span><br><span class="line">  shiftReg = _RAND_0[<span class="number">7</span>:<span class="number">0</span>];</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span> </span><span class="comment">// RANDOMIZE_REG_INIT</span></span><br><span class="line">  <span class="meta">`<span class="keyword">endif</span> </span><span class="comment">// RANDOMIZE</span></span><br><span class="line"><span class="keyword">end</span> <span class="comment">// initial</span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> FIRRTL_AFTER_INITIAL</span></span><br><span class="line">`FIRRTL_AFTER_INITIAL</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">`<span class="keyword">endif</span> </span><span class="comment">// SYNTHESIS</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="5-状态机及键盘输入"><a href="#5-状态机及键盘输入" class="headerlink" title="5.状态机及键盘输入"></a>5.状态机及键盘输入</h5><p>nvboard有提供一个ps2_keyboard的module，稍微改改就能用。关键在于扫描码到ASCII码的转换。我的方法比较笨，直接用一个reg向量存储，然后进行初始化。初始化的代码写个两三行，剩下的直接交给ChatGPT续写。总之挺蠢的，不过有用。最后的效果图：</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/b6b6c5077e5f33d2debae590fd2f714e.png" class>

<h5 id="6-题外话"><a href="#6-题外话" class="headerlink" title="6.题外话"></a>6.题外话</h5><p>即使现在学会了怎么用CHISEL写一些简单的模块，我还是感到使用的过程中没有发挥CHISEL本身的优势，现在的我还是有点把CHISEL当verilog来写的感觉。</p>
<hr>
<h4 id="PA1-思考题"><a href="#PA1-思考题" class="headerlink" title="PA1 思考题"></a>PA1 思考题</h4><h5 id="1-什么是NEMU？"><a href="#1-什么是NEMU？" class="headerlink" title="1.什么是NEMU？"></a>1.什么是NEMU？</h5><p>完成PA1后，我理解的NEMU是一个模拟了硬件系统的程序，能够像CPU一样完成取指令、执行、访存的过程。NEMU包含一些配套的基础设施，如我们完成的SDB，以及之后PA2里的各个trace等等。</p>
<h5 id="2-计算机可以没有寄存器吗？"><a href="#2-计算机可以没有寄存器吗？" class="headerlink" title="2.计算机可以没有寄存器吗？"></a>2.计算机可以没有寄存器吗？</h5><p>可以，用存储器替代寄存器在执行结果上应当是相同的，但计算机的执行效率肯定会大打折扣。</p>
<h5 id="3-尝试理解计算机如何计算"><a href="#3-尝试理解计算机如何计算" class="headerlink" title="3.尝试理解计算机如何计算"></a>3.尝试理解计算机如何计算</h5><p>不论是什么计算机，它做的事情自始至终都只有 取指令-&gt;执行-&gt;取指令 的不停循环。在汇编语言的层面更能体会到这一点，比如讲义里给的一段x86汇编代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// PC: instruction    | // label: statement</span><br><span class="line">0: mov  r1, 0         |  pc0: r1 = 0;</span><br><span class="line">1: mov  r2, 0         |  pc1: r2 = 0;</span><br><span class="line">2: addi r2, r2, 1     |  pc2: r2 = r2 + 1;</span><br><span class="line">3: add  r1, r1, r2    |  pc3: r1 = r1 + r2;</span><br><span class="line">4: blt  r2, 100, 2    |  pc4: if (r2 &lt; 100) goto pc2;   // branch if less than</span><br><span class="line">5: jmp 5              |  pc5: goto pc5;</span><br></pre></td></tr></table></figure>

<p>这段代码执行的是一个计算1+2+…+100的过程，r1和r2在这个过程中用于存放中间数据。右边给出的一个不可见的计数器PC的值在执行过程中的变化。汇编代码更能让我们体会到冯诺依曼计算机是顺序执行各类指令的。</p>
<h5 id="4-为什么init-monitor-里全都是函数"><a href="#4-为什么init-monitor-里全都是函数" class="headerlink" title="4.为什么init_monitor()里全都是函数"></a>4.为什么init_monitor()里全都是函数</h5><p>这是为了把功能类型相同的函数封装在一起，提升代码的可读性。</p>
<h5 id="5-参数的处理过程"><a href="#5-参数的处理过程" class="headerlink" title="5.参数的处理过程"></a>5.参数的处理过程</h5><p>参数指的是int argc和char **argv，这两个参数是为了系统提供的，通过命令行传入。argc指示命令行传入的参数的总个数，argv则是一个指向各个参数字符串的指针数组。</p>
<h5 id="6-优美的退出"><a href="#6-优美的退出" class="headerlink" title="6.优美的退出"></a>6.优美的退出</h5><p>直接make run运行nemu会遇到assert(0)报错，将对应的assert(0)语句去掉后即可正常执行nemu。这里还有一个问题就是在一启动nemu就直接输入q退出会导致makefile报错，RTFSC发现is_good_status_bad函数里少了一个当nemu_state.state &#x3D;&#x3D; NEMU_QUIT时的情况。改正后的函数如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">is_exit_status_bad</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">int</span> good = (nemu_state.state == NEMU_END &amp;&amp; nemu_state.halt_ret == <span class="number">0</span>) ||</span><br><span class="line">    (nemu_state.state == NEMU_QUIT);</span><br><span class="line">  <span class="keyword">return</span> !good;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="7-谁来指示程序的结束"><a href="#7-谁来指示程序的结束" class="headerlink" title="7.谁来指示程序的结束"></a>7.谁来指示程序的结束</h5><p>根据之前做操作系统实验的经验，程序在main函数的前后都有其它命令执行。进程启动前需要初始化一系列环境变量，准备好main函数的参数，然后调用main执行。main在返回以后还需要等待进程资源释放，程序才能算作完全结束。</p>
<h5 id="8-简易调试器"><a href="#8-简易调试器" class="headerlink" title="8.简易调试器"></a>8.简易调试器</h5><p>（1）单步执行：</p>
<p>很简单，只需要把参数传入的字符串转换为int类型，然后调用cpu_exec即可。</p>
<p>（2）打印寄存器</p>
<p>寄存器的定义在src&#x2F;isa&#x2F;riscv64&#x2F;reg.c中，这个函数也不难实现。</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/ee.png" class>

<p>（3）扫描内存</p>
<p>调用vaddr_read函数即可。</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/eeee" class>

<p>（4）表达式求值</p>
<p>我使用的正则式如下：</p>
<img src="/2023/03/27/ysyx%E9%A2%84%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/eeeeeee" class>

<p>之后就按照讲义提示的思路，对每一个类型的token指定对应的操作。在确定主运算符时我的思路是在遍历token数组的过程中把每个优先级的在式子最右的运算符位置记录下来，然后根据运算符优先级确认主运算符。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=q;i&gt;=p;i--)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(tokens[i].type == <span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">        pari++;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(tokens[i].type == <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">        pari--;</span><br><span class="line">    <span class="keyword">if</span>(pari == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span>(tokens[i].type)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> TK_LOGIC_OR:</span><br><span class="line">                <span class="keyword">if</span>(op[<span class="number">0</span>] == <span class="number">-1</span>) op[<span class="number">0</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> TK_LOGIC_AND:</span><br><span class="line">                <span class="keyword">if</span>(op[<span class="number">1</span>] == <span class="number">-1</span>) op[<span class="number">1</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> TK_EQ:</span><br><span class="line">            <span class="keyword">case</span> TK_UNEQ:</span><br><span class="line">                <span class="keyword">if</span>(op[<span class="number">2</span>] == <span class="number">-1</span>) op[<span class="number">2</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                <span class="keyword">if</span>(op[<span class="number">3</span>] == <span class="number">-1</span>) op[<span class="number">3</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">                <span class="keyword">if</span>(op[<span class="number">4</span>] == <span class="number">-1</span>) op[<span class="number">4</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> TK_DEREF:</span><br><span class="line">                <span class="keyword">if</span>(op[<span class="number">5</span>] == <span class="number">-1</span>) op[<span class="number">5</span>] = i;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// if not found, search for a &#x27;*&#x27; or &#x27;/&#x27; as main operation</span></span><br><span class="line"><span class="type">int</span> op_type = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(op[i] != <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        op_type = op[i];</span><br><span class="line">        Log(<span class="string">&quot;op_type = i&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解引用运算符的判断过程如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nr_token; i ++) </span><br><span class="line">&#123; </span><br><span class="line">    <span class="type">int</span> j = i<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(j &gt;= <span class="number">0</span> &amp;&amp; tokens[j].type == TK_NOTYPE) j--;</span><br><span class="line">    <span class="keyword">if</span> (tokens[i].type == <span class="string">&#x27;*&#x27;</span> &amp;&amp; (i == <span class="number">0</span> || tokens[j].type == <span class="string">&#x27;(&#x27;</span> || </span><br><span class="line">        tokens[j].type == <span class="string">&#x27;+&#x27;</span> || tokens[j].type == <span class="string">&#x27;-&#x27;</span> || </span><br><span class="line">        tokens[j].type == <span class="string">&#x27;*&#x27;</span> || tokens[j].type == <span class="string">&#x27;/&#x27;</span> ||</span><br><span class="line">        (tokens[j].type &gt;= TK_EQ &amp;&amp; tokens[j].type &lt;= TK_UNEQ))) </span><br><span class="line">    &#123;</span><br><span class="line">          <span class="comment">// Log(&quot;position %d is DEREF&quot;, i);</span></span><br><span class="line">          tokens[i].type = TK_DEREF;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（5）监视点</p>
<p>我对原本的watchpoint数据结构进行了修改，新增了val和status两个域：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">watchpoint</span> &#123;</span></span><br><span class="line">  <span class="type">int</span> NO;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">watchpoint</span> *<span class="title">next</span>;</span></span><br><span class="line">  <span class="type">char</span> expr[<span class="number">1024</span>];</span><br><span class="line">  <span class="type">word_t</span> val;</span><br><span class="line">  <span class="type">int</span> status;</span><br><span class="line">  <span class="comment">/* <span class="doctag">TODO:</span> Add more members if necessary */</span></span><br><span class="line"></span><br><span class="line">&#125; WP;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">WP_STATUS</span>&#123;</span></span><br><span class="line">    WP_FREE, WP_BUSY</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>链表操作在此不作展示，以下是检查监视点的代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">check_watchpoints</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    WP *p = head;</span><br><span class="line">    <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(!p) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(;p;p=p-&gt;next)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">bool</span> success = <span class="literal">false</span>;</span><br><span class="line">        <span class="type">word_t</span> new_val = expr(p-&gt;expr, &amp;success);</span><br><span class="line">        <span class="keyword">if</span>(success &amp;&amp; new_val != p-&gt;val)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Watchpoint %d: %s\n&quot;</span>, p-&gt;NO, p-&gt;expr);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Old Value is :%lu\n&quot;</span>, p-&gt;val);</span><br><span class="line">            p-&gt;val = new_val;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;New Value is :%lu\n&quot;</span>, new_val);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个函数会在cpu-exec.c中的trace_and_difftest函数中调用，每执行一条指令就检测是否有监视点被触发。</p>
<p>至此PA1全部完成。</p>
<hr>
<h4 id="读后感"><a href="#读后感" class="headerlink" title="读后感"></a>读后感</h4><p>两篇文章都针对如何提问这点进行了阐述，《别像弱智一样提问》主要侧重于提问时需要注意的地方，如合适的描述问题，以及注意回答者（如果他真的愿意回答你）的情绪等等，而《提问的智慧》则更全面，按照小标题划分，大致可归纳为以下几点：</p>
<ul>
<li>在提问之前需要确定自己已尝试运用各种策略（如Google）解决问题</li>
<li>提问时慎选提问的论坛，精确地描述问题，注意用词等</li>
<li>解读答案的方式</li>
</ul>
<p>虽然看着的时候觉得这些都是基本的需要掌握的东西，不过根据现实经历，文章中出现的各种错误示范还是相当常见的（事实上我同学里面就有）。根据《提问的智慧》里提到的内容，好的提问应该具有以下特征：</p>
<ul>
<li>描述清晰、精确，提供了足够多的背景信息</li>
<li>描述的问题是足够新颖的</li>
<li>提问的语气、用词合适，没有掺杂与问题无关的内容</li>
<li>是通过合适的渠道向回答者发送的</li>
</ul>
<p>对我个人而言，由于性格上的原因，实际上我很少向一个陌生人询问问题。在没有熟人能够帮助我解决问题的情况下，我是更倾向于自己一个人解决的。换句话说，不是万不得已，我不会去麻烦一个陌生人来解决我的问题，一是在交流问题细节的时候会顾虑很多，二来也是怕吃闭门羹。不过这样的习惯倒是培养了我自己独立解决问题的能力，通常来说我遇到的问题在搜索引擎上总能找到类似的问题，即使它们解决问题的方法没能对我的问题奏效，也能获得一些参考。早些时候我基本上还是只使用百度，但最近因为学习的东西变得相对不那么主流，我也发现在Google上搜索能够获得更多想要的结果。不过我或许天生就比较喜欢折腾，所以摸索未知的问题并没有给我带来什么痛苦，独立解决一个难题带来的成就感也是从别人那直接问到答案得不到的。刚上大学接触编程的两年里，总是觉得别人起步比我早，自己要追上去需要学习的东西太多，感到无力而迷茫。后来我想通了，不去尝试着学就连追上别人的希望都没有，然后也开始尝试着折腾linux，折腾一些神秘的开源项目，在这个过程中学到了不少东西，渐渐地在大佬讨论问题时也能听懂一些了。</p>
<p>总而言之，读这两篇文章的体验是十分愉快的，里面举的一些错误范例也让人忍俊不禁。我自己也很讨厌别人问问题时描述不清不楚，或是带着很多无意义的话（跪求、急、救命之类的）。以后要是遇到这样的人，干脆就甩这两篇文章上去好了。以后自己也得多多注意，不能出现“像个弱智一样提问”的情况。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://sevenqi7.github.io/2023/03/27/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/myicon.jpg">
      <meta itemprop="name" content="Sevenqi7@github.io">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Seven7's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/27/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-03-27 11:22:31" itemprop="dateCreated datePublished" datetime="2023-03-27T11:22:31+08:00">2023-03-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-03-28 16:44:44" itemprop="dateModified" datetime="2023-03-28T16:44:44+08:00">2023-03-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sevenqi7@github.io"
      src="/images/myicon.jpg">
  <p class="site-author-name" itemprop="name">Sevenqi7@github.io</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sevenqi7@github.io</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/nico.model.json"},"display":{"position":"right","width":300,"height":600},"mobile":{"show":true}});</script></body>
  
  <!-- 樱花特效 -->
  
      <script async src="/js/src/fairyDustCursor.js"></script>
  
</html>
